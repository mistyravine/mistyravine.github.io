<html>
    <head>
<link href="https://use.fontawesome.com/releases/v5.6.1/css/all.css" rel="stylesheet">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<link href="./cloudsinthesky/animatedtext.css" rel="stylesheet">
<link href="./cloudsinthesky/musicplayer.css" rel="stylesheet">
<link rel="icon" href="./cloudsinthesky/cloudsicon.png">
          <title>Clouds in the sky</title>
      <style>
@import url('https://fonts.googleapis.com/css?family=Montserrat&display=swap');

body{
  margin:0;
}

#wallpaper{
  mix-blend-mode:screen;
  position:fixed;
  z-index:-3;
  width:100%;
  height:100%;
  background:url(./cloudsinthesky/wallhaven1.jpg)no-repeat center/cover;
}
#note{
  position:absolute;
  bottom: 6px;1
  left: 6px;
  width: 100%;
  width: 100%;
  font-size: 17px;
}
          </style>
    </head>
    <body>
        <div id="wallpaper">
        </div>
        <div class="name">
          <div class="layer1 change nameWave" style="background-image: repeating-linear-gradient(-45deg, rgb(2, 170, 170) 3%, rgb(0, 244, 252) 14.75%, rgb(255, 0, 221) 26.5%, rgb(68, 0, 255) 38.25%, rgb(56, 149, 255) 50%); animation-duration: 10s; text-align: center">"Let your mind be free, amidst the clouds"</div>
          <div class="layer2 change" style="text-shadow: rgb(77, 255, 255) 0px 0px 0.2rem, rgb(77, 255, 255) 0px 0px 0.2rem, rgb(77, 255, 255) 0px 0px 0.2rem; text-align: center">"Let your mind be free, amidst the clouds"</div>
        </div>
        <div id="note">
          Under construction
        </div>      
            <audio src="./cloudsinthesky/Relaxing Music - Clouds in the Sky.mp3" id="song"></audio>
            <div class="container">
              <div class="box"></div>
              <img src="./cloudsinthesky/thumb.jpg" id="thumbnail" />
              <img src="./cloudsinthesky/playbutton.jpg" onclick="playPause()"     
              id="play-pause" />
              <div class="song-artist">Misty Ravine</div>
              <div class="song-title">Clouds in the sky</div>
              <!-- Input element for progress bar - min=0 starting value of  
              every song - max length will change per song so leave empty -->
              <input
                type="range"
                id="progress-bar"
                min="0"
                max=""
                value="0"
                onchange="changeProgressBar()"
              />
              <div class="currentTime"></div>
              <div class="durationTime"></div>
            </div>   
            <script>
              const background = document.querySelector('#background');
              const thumbnail = document.querySelector('#thumbnail'); 
              const song = document.querySelector('#song'); 
              const songArtist = document.querySelector('.song-artist'); 
              const songTitle = document.querySelector('.song-title'); 
              const progressBar = document.querySelector('#progress-bar'); 
              let pPause = document.querySelector('#play-pause'); 
              songIndex = 0;
              let playing = true;
              function playPause() {
                  if (playing) {
                      const song = document.querySelector('#song'),
                      thumbnail = document.querySelector('#thumbnail');
              
                      pPause.src = "./cloudsinthesky/playbutton.jpg"
                      thumbnail.style.transform = "scale(1.15)";
                      
                      song.play();
                      playing = false;
                  } else {
                      pPause.src = "./cloudsinthesky/playbutton.jpg"
                      thumbnail.style.transform = "scale(1)"
                      
                      song.pause();
                      playing = true;
                  }
              }
              
              song.addEventListener('ended', function(){
                  nextSong();
              });
              
              function nextSong() {
                  songIndex++;
                  if (songIndex > 1) {
                      songIndex = 0;
                  };
                  song.src = songs[songIndex];
                  thumbnail.src = thumbnails[songIndex];
                  background.src = thumbnails[songIndex];
              
                  songArtist.innerHTML = songArtists[songIndex];
                  songTitle.innerHTML = songTitles[songIndex];
              
                  playing = true;
                  playPause();
              }
              
              function previousSong() {
                  songIndex--;
                  if (songIndex < 0) {
                      songIndex = 1;
                  };
                  song.src = songs[songIndex];
                  thumbnail.src = thumbnails[songIndex];
                  background.src = thumbnails[songIndex];
              
                  songArtist.innerHTML = songArtists[songIndex];
                  songTitle.innerHTML = songTitles[songIndex];
              
                  playing = true;
                  playPause();
              }
              
              function updateProgressValue() {
                  progressBar.max = song.duration;
                  progressBar.value = song.currentTime;
                  document.querySelector('.currentTime').innerHTML = (formatTime(Math.floor(song.currentTime)));
                  if (document.querySelector('.durationTime').innerHTML === "NaN:NaN") {
                      document.querySelector('.durationTime').innerHTML = "0:00";
                  } else {
                      document.querySelector('.durationTime').innerHTML = (formatTime(Math.floor(song.duration)));
                  }
              };
              
              function formatTime(seconds) {
                  let min = Math.floor((seconds / 60));
                  let sec = Math.floor(seconds - (min * 60));
                  if (sec < 10){ 
                      sec  = `0${sec}`;
                  };
                  return `${min}:${sec}`;
              };
              
              setInterval(updateProgressValue, 500);
              
              function changeProgressBar() {
                  song.currentTime = progressBar.value;
              };
                          
                          </script>   
    </body>
</html>
